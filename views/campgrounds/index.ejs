<% layout('./layout/boilerplate') %>
<div class="mb-3" id="mainMap" style="width:100%; height:500px" crossorigin="anonymous"></div>
<h1 class="text-center">All Campgrounds</h1>
<div class="row">
	<div class="col-6 offset-3">
		<ul style="text-decoration: none;">
			<% for(let i = 0 ; i < campgrounds.length ; i++) {%>
			<li key='<%= campgrounds[i]._id %>' style="list-style: none;">
				<div class="card mb-3" style="max-width: 840px; max-height: 250px;">
					<div class="row g-0">
						<div class="col-md-4">
							<img crossorigin="anonymous" src="<%=campgrounds[i].image.length>0 ? campgrounds[i].image[0].url : 'https://northeastohiofamilyfun.com/wp-content/uploads/2020/05/Campgrounds-in-Ohio.jpg'%>" class="img-fluid rounded-start" style="height:249px; width: 300px;" alt="N/A">
						</div>
						<div class="col-md-8">
							<div class="card-body">
								<h5 class="card-title"><%=campgrounds[i].title%></h5>
								<p class="card-text"><%=campgrounds[i].description %></p>
								<p class="card-text"><small class="text-body-secondary">Last updated 3 mins ago</small></p>
							</div>
						</div>
					</div>
					<a href='<%=`/campgrounds/${campgrounds[i]._id}`%>' class="stretched-link"></a>
				</div>
			</li>
			<% } %>
		</ul>
	</div>
</div>
<script crossorigin="anonymous">
	const mapToken = '<%-process.env.MAPBOX_TOKEN%>'
	const campgrounds = {
		features: <%-JSON.stringify(campgrounds)%>
	}
</script>
<script src="/javascripts/clustureMap.js" />